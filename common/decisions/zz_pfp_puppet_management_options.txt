pfp_puppet_management = {
    pfp_management_window = {
		icon = generic_industry

		available = { 
            is_ai = no
        }

		fire_only_once = no
		complete_effect = { 
            set_country_flag = pfp_management_window
        }
		ai_will_do = { factor = 0 }
	}
	pfp_management_coloured_puppets = {
		icon = generic_industry

		available = {
			is_ai = no
		}

		fire_only_once = no

		complete_effect = {
			hidden_effect = {
				if = {
					limit = { has_global_flag = pfp_autonomy_military_occupation_colour_on }
					clr_global_flag = pfp_autonomy_military_occupation_colour_on

					every_country = {
						every_subject_country = {
							limit = { has_autonomy_state = pfp_autonomy_military_occupation_colour }
							set_temp_variable = { target_military_occupation = THIS }
							overlord = { set_autonomy = { target = target_military_occupation autonomy_state = pfp_autonomy_military_occupation } }
						}
					}
				}
				else = {
					set_global_flag = pfp_autonomy_military_occupation_colour_on

					every_country = {
						every_subject_country = {
							limit = { has_autonomy_state = pfp_autonomy_military_occupation }
							set_temp_variable = { target_military_occupation = THIS }
							overlord = { set_autonomy = { target = target_military_occupation autonomy_state = pfp_autonomy_military_occupation_colour } }
						}
					}
				}
			}
		}
		ai_will_do = { factor = 0 }
	}
}